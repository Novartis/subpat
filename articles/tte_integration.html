<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TTE Module Integration • subpat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="TTE Module Integration">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">subpat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    User Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/plg.html">User guide to PLG</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Dev Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/modules.html">Modules overview</a>
    </li>
    <li>
      <a href="../articles/tte_integration.html">TTE module integration</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Novartis/subpat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>TTE Module Integration</h1>
                        <h4 class="author">Stefan Eng</h4>
            
            <h4 class="date">2020-03-17</h4>
      
      
      <div class="hidden name"><code>tte_integration.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The TTE (time-to-event) modules are <a href="https://opensource.nibr.com/tidymodules"><code>{tidymodules}</code></a>, which are R6 classes. The TTE collection of modules features three main modules:</p>
<ul>
<li><a href="#TTE">TTE</a></li>
<li><a href="#TTEMapping">TTEMapping</a></li>
<li><a href="#SubgroupManager">SubgroupManager</a></li>
</ul>
<p>If you are integrating this into a project you generally will not need the Mapping module as you will already know which variables you will be including in your models. The mapping module is useful if you want to load multiple data sets that have inconsistent naming schemes, such as ADaM and NOVDD.</p>
<p>Before including these in your application it is good to be familiar with standard Shiny modules. A good introduction is available here: <a href="https://shiny.rstudio.com/articles/modules.html" class="uri">https://shiny.rstudio.com/articles/modules.html</a></p>
</div>
<div id="TTE" class="section level2">
<h2 class="hasAnchor">
<a href="#TTE" class="anchor"></a>TTE</h2>
<p>The TTE Module features include:</p>
<ul>
<li>Kaplan Meier Survival Plot</li>
<li>Event summary tables</li>
<li>Cox proportional hazard model
<ul>
<li>Forest plot</li>
<li>Hazard ratio estimates and confidence intervals</li>
</ul>
</li>
</ul>
<p>We can run this example with the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">subpat<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/subpat/man/subpatExamples.html">subpatExamples</a></span>(<span class="st">"06_tte_simple"</span>)</a></code></pre></div>
<p>There are a few main parts that are different from regular Shiny modules. The first step is that we need to <em>initialize</em> the module with</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(subpat)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; Loading required package: bs4Dash</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; Attaching package: 'bs4Dash'</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; The following object is masked from 'package:graphics':</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;     box</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; Loading required package: tidymodules</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; Loading required package: shinyBS</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; subpat is NOT VALIDATED, and should be reserved for exploratory analysis only.</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">tteModule &lt;-<span class="st"> </span>TTE<span class="op">$</span><span class="kw">new</span>()</a></code></pre></div>
<p>We can optionally give our module an id by passing <code>id = my_id</code> as a parameter to <code>new</code>. The module will dynamically create an id if we do not specify one. We can see what the module looks like by printing it</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">tteModule</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; Module Namespace TTE-1</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; Module Session global_session</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; - Class TTE &lt;&lt; TidyModule &lt;&lt; R6</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; - Input [4]</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; (1) data =&gt; Empty</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; (2) mapping =&gt; Empty</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; (3) subgroups =&gt; Empty</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; (4) options =&gt; Empty</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; - Output [0]</span></a></code></pre></div>
<p>Here we can see the namespace that was generated, the input ports and the output ports. You can think of the input ports as the parameters to a function. The output ports are the values that are returned from the module. Here we can see that there is nothing being returned, since this module just displays data. We can refer to the input or output ports by name or by number. In the TTE modules, options is always the last input port.</p>
<p>The next step is to call our module somewhere in the server function:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">tteModule<span class="op">$</span><span class="kw">callModule</span>()</a></code></pre></div>
<p>This is identical to using Shiny’s <code>callModule</code> function except that we do not have to keep track of the id of the module.</p>
<p>The next step is to pass data and options into our module. There are two ways to pass data into a TidyModule: through pipes, and explictly. The elegant way to do this with tidymodules (and why is is named <em>tidy</em> modules), is through pipes. The basic formula to pass data into a module is <code>my_reactive %&gt;j% MyModule</code>. This will pass the <code>my_reactive</code> reactive value into the jth input port of <code>MyModule</code>. Let’s try this with the TTE module:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># Create a reactive of the NCCTG Lung Cancer Data Set from the survival package</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">data_reactive &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  survival<span class="op">::</span>lung</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">})</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co"># Pass the data into the TTE module</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co"># This needs to be in a server function and reactive context:</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co"># E.g: isolate, observe, observeEvent, etc.</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="kw">isolate</span>({</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">  data_reactive <span class="op">%&gt;1%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">})</a></code></pre></div>
<p>Now we have the data passed into the module. Currently the module will not do much since it expects the <code>mapping</code> parameter to be provided. The mapping is a reactive list of values that map the variables from your data set into the correct parameter. The parameters are:</p>
<ul>
<li><code>time</code></li>
<li><code>event</code></li>
<li><code>treatment</code></li>
<li><code>strata</code></li>
<li><code>parameter</code></li>
<li><code>parameter_value</code></li>
<li><code>population</code></li>
<li><code>aval_conv</code></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Set the variable names to use in the model</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co"># See the information about the variables with</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># help(lung)</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">mapping &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="dt">time =</span> <span class="st">'time'</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">    <span class="dt">event =</span> <span class="st">'status'</span>,</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    <span class="dt">treatment =</span> <span class="st">'sex'</span>,</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    <span class="co"># Conversion factor: makes the time number of months.</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    <span class="dt">aval_conv =</span> <span class="fl">30.34</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">})</a>
<a class="sourceLine" id="cb6-13" data-line-number="13"></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co"># Pass the mapping into the second input port</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="kw">isolate</span>({</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">  mapping <span class="op">%&gt;2%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">})</a></code></pre></div>
<p>We can also pass options into the module in a similar way. Options expects a reactive function. There are two options that we can pass into the module:</p>
<ul>
<li>
<code>makePlotly</code> Should the graph be interactive via plotly? Note, enabling this is experimental and the survival plots do not always look great. Default: <code>FALSE</code>
</li>
<li>
<code>conftype</code> The confidence interval type. Choice between: “none”, “plain”, “log”, or “log-log”. Default: “log-log”</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">options &lt;-<span class="st"> </span><span class="kw">reactive</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">    <span class="dt">makePlotly =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    <span class="dt">conftype =</span> <span class="st">"log-log"</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  ))</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw">isolate</span>({</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  options <span class="op">%&gt;4%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">})</a></code></pre></div>
<p>That’s all you need to include the TTE module in your application. The full application is available below:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(shiny)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(subpat)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidymodules)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">tteModule &lt;-<span class="st"> </span>TTE<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">ui &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span>(</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  <span class="kw"><a href="https://rdrr.io/pkg/shiny/man/builder.html">h2</a></span>(<span class="st">"Time-to-event Analysis of NCCTG Lung Cancer Data"</span>),</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">  tteModule<span class="op">$</span><span class="kw">standardUi</span>()</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">  <span class="co"># Set the variable names to use in the model</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">  mapping &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span>({</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">    <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">      <span class="dt">time =</span> <span class="st">'time'</span>,</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">      <span class="dt">event =</span> <span class="st">'status'</span>,</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">      <span class="dt">treatment =</span> <span class="st">'sex'</span>,</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">      <span class="co"># Conversion factor: makes the time number of months.</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21">      <span class="dt">aval_conv =</span> <span class="fl">30.34</span>,</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">      <span class="co"># Included are some other parameters that we can set</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23">      <span class="co"># For this example, we set them to null</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24">      <span class="co"># The comments show some common values ADaM data sets</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25">      <span class="dt">strata =</span> <span class="ot">NULL</span>, <span class="co"># c('STRVAL1', 'STRVAL2'),</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26">      <span class="dt">parameter =</span> <span class="ot">NULL</span>, <span class="co"># 'PARAM',</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27">      <span class="dt">parameter_value =</span> <span class="ot">NULL</span>, <span class="co"># 'Progression free Survival',</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28">      <span class="dt">population =</span> NULL<span class="co"># "FASFL"</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29">    )</a>
<a class="sourceLine" id="cb8-30" data-line-number="30">  })</a>
<a class="sourceLine" id="cb8-31" data-line-number="31"></a>
<a class="sourceLine" id="cb8-32" data-line-number="32">  <span class="co"># Here are some general options for the module</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33">  options &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb8-34" data-line-number="34">    <span class="co"># Do you want the graph interactive?</span></a>
<a class="sourceLine" id="cb8-35" data-line-number="35">    <span class="dt">makePlotly =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb8-36" data-line-number="36">    <span class="co"># Confidence interval type</span></a>
<a class="sourceLine" id="cb8-37" data-line-number="37">    <span class="co"># Options: log-log (SAS default), "log", "none", "plain"</span></a>
<a class="sourceLine" id="cb8-38" data-line-number="38">    <span class="co"># See help on survival::survfit.formula for more information</span></a>
<a class="sourceLine" id="cb8-39" data-line-number="39">    <span class="dt">conftype =</span> <span class="st">"log-log"</span></a>
<a class="sourceLine" id="cb8-40" data-line-number="40">  ))</a>
<a class="sourceLine" id="cb8-41" data-line-number="41"></a>
<a class="sourceLine" id="cb8-42" data-line-number="42">  <span class="co"># We need to call the callModule() method of the tidymodule</span></a>
<a class="sourceLine" id="cb8-43" data-line-number="43">  tteModule<span class="op">$</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/callModule.html">callModule</a></span>()</a>
<a class="sourceLine" id="cb8-44" data-line-number="44"></a>
<a class="sourceLine" id="cb8-45" data-line-number="45">  <span class="co"># Here you want to load your data in some way</span></a>
<a class="sourceLine" id="cb8-46" data-line-number="46">  <span class="co"># In this example, we just wrap the `lung` dataset from the survival package</span></a>
<a class="sourceLine" id="cb8-47" data-line-number="47">  data_reactive &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span>({</a>
<a class="sourceLine" id="cb8-48" data-line-number="48">    survival<span class="op">::</span>lung</a>
<a class="sourceLine" id="cb8-49" data-line-number="49">  })</a>
<a class="sourceLine" id="cb8-50" data-line-number="50"></a>
<a class="sourceLine" id="cb8-51" data-line-number="51">  <span class="kw"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span>({</a>
<a class="sourceLine" id="cb8-52" data-line-number="52">    <span class="co"># Pass the data into the TTE module</span></a>
<a class="sourceLine" id="cb8-53" data-line-number="53">    <span class="co"># The pipe %&gt;1% means pass the reactive into the first input of TTE module (the data)</span></a>
<a class="sourceLine" id="cb8-54" data-line-number="54">    data_reactive <span class="op">%&gt;1%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb8-55" data-line-number="55">    <span class="co"># Pass the mapping into the TTE module</span></a>
<a class="sourceLine" id="cb8-56" data-line-number="56">    <span class="co"># The pipe %&gt;2% means pass the reactive into the second input of the module</span></a>
<a class="sourceLine" id="cb8-57" data-line-number="57">    mapping <span class="op">%&gt;2%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb8-58" data-line-number="58">    <span class="co"># Pass our options into the TTE module</span></a>
<a class="sourceLine" id="cb8-59" data-line-number="59">    options <span class="op">%&gt;4%</span><span class="st"> </span>tteModule</a>
<a class="sourceLine" id="cb8-60" data-line-number="60">  })</a>
<a class="sourceLine" id="cb8-61" data-line-number="61">}</a>
<a class="sourceLine" id="cb8-62" data-line-number="62"></a>
<a class="sourceLine" id="cb8-63" data-line-number="63"><span class="co"># Run the application</span></a>
<a class="sourceLine" id="cb8-64" data-line-number="64"><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
</div>
<div id="SubgroupManager" class="section level2">
<h2 class="hasAnchor">
<a href="#SubgroupManager" class="anchor"></a>SubgroupManager</h2>
<p>The subgroup module is currently a prototype, which is not as full featured as I would like. If you would like to test it out anyway, the code is easy to integrate into your own application.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(shiny)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(subpat)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bs4Dash)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidymodules)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">subgroupManagerModule &lt;-<span class="st"> </span>SubgroupManager<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">ui &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/tag.html">tagList</a></span>(</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">  shinyjs<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shinyjs/man/useShinyjs.html">useShinyjs</a></span>(),</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">  <span class="kw"><a href="https://rdrr.io/pkg/bs4Dash/man/bs4DashPage.html">bs4DashPage</a></span>(</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">    <span class="dt">sidebar =</span> <span class="kw"><a href="https://rdrr.io/pkg/bs4Dash/man/bs4DashSidebar.html">bs4DashSidebar</a></span>(<span class="dt">disable =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">    </a>
<a class="sourceLine" id="cb9-13" data-line-number="13">    <span class="dt">body =</span> <span class="kw"><a href="https://rdrr.io/pkg/bs4Dash/man/bs4DashBody.html">bs4DashBody</a></span>(</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">      subgroupManagerModule<span class="op">$</span><span class="kw">ui</span>(),</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">      <span class="kw"><a href="https://rdrr.io/pkg/shiny/man/verbatimTextOutput.html">verbatimTextOutput</a></span>(<span class="st">'subgroupSummary'</span>)</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">    )</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">  )</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19"></a>
<a class="sourceLine" id="cb9-20" data-line-number="20">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">  </a>
<a class="sourceLine" id="cb9-22" data-line-number="22">  subgroupManagerModule<span class="op">$</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/callModule.html">callModule</a></span>()</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">  </a>
<a class="sourceLine" id="cb9-24" data-line-number="24">  <span class="kw"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span>({</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">    <span class="kw"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span>(mtcars) <span class="op">%&gt;1%</span><span class="st"> </span>subgroupManagerModule</a>
<a class="sourceLine" id="cb9-26" data-line-number="26">  })</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">  </a>
<a class="sourceLine" id="cb9-28" data-line-number="28">  output<span class="op">$</span>subgroupSummary &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderPrint</a></span>({</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">    <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"Subgroups:"</span>)</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">    <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/tidymodules/man/mod.html">mod</a></span>(<span class="dv">1</span>)<span class="op">$</span><span class="kw">execOutput</span>(<span class="st">"subgroups"</span>)))</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">  })</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">}</a>
<a class="sourceLine" id="cb9-33" data-line-number="33"></a>
<a class="sourceLine" id="cb9-34" data-line-number="34"><span class="co"># Run the application</span></a>
<a class="sourceLine" id="cb9-35" data-line-number="35"><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#TTE">TTE</a></li>
      <li><a href="#SubgroupManager">SubgroupManager</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://stefanengineering.com">Stefan Eng</a>, Xiao Ni, Mustapha Larbaoui, <a href="https://www.novartis.com/"><img src="https://www.novartis.com/sites/all/themes/novartis/novartis-logo.svg" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
